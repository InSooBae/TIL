# ìŠ¤í•€ë½, ë®¤í…ìŠ¤, ì„¸ë§ˆí¬ì–´

Created Time: October 19, 2022 11:30 PM
Status: ğŸ›  In Progress

## ì–´ë–»ê²Œ Mutual Exclusionì„ ë³´ì¥í•  ìˆ˜ ìˆì„ê¹Œ?

ë½(lock)ì„ ì‚¬ìš©í•˜ì

```java
do {

	acquire lock
		critical section
	release lock
		remainder section

} while (true)
```

ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤/ì“°ë ˆë“œê°€ ë½ì„ íšë“í•˜ê¸° ìœ„í•´ì„œ ê²½í•©ì„ í•˜ê²Œ ë˜ëŠ”ë°, ê·¸ ì¤‘ ì„±ê³µí•œ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤/ì“°ë ˆë“œê°€ `critical section`ì— ë“¤ì–´ê°€ì„œ ì‹¤í–‰ì„ í•˜ê²Œ ëœë‹¤.

í•´ë‹¹ ì‘ì—…ì´ ëë‚˜ë©´ `critical section`ì„ ë¹ ì ¸ë‚˜ì˜¤ë©´ì„œ ë½ì„ ë°˜í™˜í•œë‹¤.

```c
volatile int lock = 0; // global

int test_and_set(int* lockPtr);

void critical() {
	while (test_and_set(&lock) == 1);

	... critical section

	lock = 0;
}

int test_and_set(int* lockPtr) {
	int oldLock = *lockPtr;
	*lockPtr = 1;
	return oldLock;
}
```

2ê°œì˜ ì“°ë ˆë“œ T1, T2ê°€ ìˆë‹¤ê³  ê°€ì •í•˜ê³ , critical()ì„ ì‹¤í–‰í•œë‹¤.

`while (test_and_set(&lock) == 1);` T1ì´ ì‹¤í–‰ í›„ `lock`ì´ 1ì´ ëœ í›„ 0ì„ ë¦¬í„´í•˜ì—¬ `critical section`ì— ì§„ì…í•œë‹¤.